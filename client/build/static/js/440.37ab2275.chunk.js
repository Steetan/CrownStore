"use strict";(self.webpackChunkcrown_store=self.webpackChunkcrown_store||[]).push([[440],{1440:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var l=a(5043),o=a(4858),r=a(8202),t=a(5163),n=a(3003),c=a(3216),i=a(5475),d=a(5795),u=a(3840),m=a(7154),p=a(579);const h=e=>{let{}=e;const s=(0,r.j)(),{userImgUrl:a}=(0,n.d4)((e=>e.authSlice)),h=(0,c.Zp)(),b=l.useRef(null),{register:f,handleSubmit:j,formState:{errors:_}}=(0,o.mN)();l.useEffect((()=>{(async()=>{const e=await s((0,t.qZ)());if(null!==e&&void 0!==e&&e.payload)h("/")})()}),[]);return(0,p.jsx)("div",{className:"form-block-wrapper",children:(0,p.jsxs)("div",{className:"form-block",children:[(0,p.jsx)("h3",{className:"form-block__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,p.jsxs)("form",{onSubmit:j((async e=>{const l=await s((0,t._D)({...e,url:a}));if(!l.payload)return alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f!");l.payload.token&&(window.localStorage.setItem("token",l.payload.token),h("/"))})),children:[(0,p.jsxs)("div",{className:"form-block__inputs",children:[(0,p.jsx)(d.A,{error:_.password&&!0,id:"outlined-basic",className:"form-block__input",label:"\u0418\u043c\u044f",variant:"outlined",...f("name",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f"})}),_.name&&(0,p.jsx)("p",{style:{color:"red"},children:_.name.message}),(0,p.jsx)(d.A,{error:_.password&&!0,id:"outlined-basic",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:"form-block__input",variant:"outlined",...f("fname",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e"})}),_.fname&&(0,p.jsx)("p",{style:{color:"red"},children:_.fname.message}),(0,p.jsx)(d.A,{error:_.password&&!0,id:"outlined-basic",label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:"form-block__input",variant:"outlined",...f("oname",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"})}),_.oname&&(0,p.jsx)("p",{style:{color:"red"},children:_.oname.message}),(0,p.jsx)(d.A,{error:_.password&&!0,id:"outlined-basic",label:"Email",className:"form-block__input",variant:"outlined",...f("email",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"})}),_.email&&(0,p.jsx)("p",{style:{color:"red"},children:_.email.message}),(0,p.jsx)(d.A,{error:_.password&&!0,id:"outlined-basic",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",className:"form-block__input",variant:"outlined",...f("phone",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"})}),_.phone&&(0,p.jsx)("p",{style:{color:"red"},children:_.phone.message}),(0,p.jsx)(d.A,{error:_.password&&!0,id:"outlined-basic",label:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"form-block__input",variant:"outlined",type:"password",...f("password",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),_.password&&(0,p.jsx)("p",{style:{color:"red"},children:_.password.message}),!a&&(0,p.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e"}),(0,p.jsx)("input",{id:"file-upload",ref:b,type:"file",style:{display:"none"},onChange:async e=>{try{const a=new FormData;a.append("image",e.target.files[0]),u.A.post("".concat("http://localhost:8080","/upload/user"),a).then((e=>{let{data:a}=e;s((0,t.W0)("".concat(a.url)))}))}catch(a){console.warn(a)}}}),a&&(0,p.jsx)("button",{className:"settings__btn-delete",onClick:()=>{try{m.A.delete("".concat("http://localhost:8080","/upload/auth/delete/").concat(a)),b.current&&(b.current.value=""),s((0,t.W0)(""))}catch(e){console.log(e)}},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,p.jsx)("img",{className:"form-block__img-upload",src:"".concat("http://localhost:8080","/uploads/userIcons/").concat(a),alt:""})]}),(0,p.jsxs)("div",{className:"form-block__btns",children:[(0,p.jsx)("button",{type:"submit",className:"button button--footer",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,p.jsxs)("p",{children:["\u0415\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",(0,p.jsxs)(i.N_,{to:"/auth/login",className:"button-link-reg",children:[" ","\u0412\u043e\u0439\u0442\u0438"]})]})]})]})]})})}}}]);
//# sourceMappingURL=440.37ab2275.chunk.js.map